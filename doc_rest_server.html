




 

 
 
 

     <!doctype html>
<!--
 Generated by Apache Maven Doxia  at 2019-09-04  Rendered using Reflow Maven Skin 2.0.0-beta2 (http://devacfr.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">
                                                                    
                    <head>
    <meta charset="UTF-8" />
    <title>RESTful Server - HAPI FHIR</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="James Agnew" />
      <meta http-equiv="content-language" content="en" />
                                                        <link href="https://netdna.bootstrapcdn.com/bootswatch/4.1.3/lumen/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <link href="./css/docs.css" rel="stylesheet" />
    <link href="./css/reflow-skin.css" rel="stylesheet" />

    <link href="./css/lightbox.css" rel="stylesheet" />
    <link href="./css/site.css" rel="stylesheet" />
    <link href="./css/print.css" rel="stylesheet" media="print" />
<!-- Syntax Highlighter -->
			<script type="text/javascript" src="syntaxhighlighter/shCore.js"></script>
			<script type="text/javascript" src="syntaxhighlighter/shBrushJScript.js"></script>
			<script type="text/javascript" src="syntaxhighlighter/shBrushJava.js"></script>
			<script type="text/javascript" src="syntaxhighlighter/shBrushBash.js"></script>
			<script type="text/javascript" src="syntaxhighlighter/shBrushXml.js"></script>
			
			<link href="syntaxhighlighter/shCore.css" rel="stylesheet" type="text/css" />
			<link href="syntaxhighlighter/shThemeDefault.css" rel="stylesheet" type="text/css" />
			
			<!-- 
			   HAPI stylesheet comes after because it overwrites the Syntax Highlighter
			   font size
			 -->
			<link rel="shortcut icon" href="http://hapifhir.io/favicon.png" />
			<link rel="stylesheet" type="text/css" href="hapi.css" />
        </head> <!-- end : head -->
<body class="page-doc_rest_server project-hapi-fhir   scroll-top-smooth-enabled m-toc-sidebar-enabled m-toc-sidebar-expanded m-toc-sidebar-autoexpandable toc-sidebar-fixed">
    <nav id="m-top-navbar" class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary border-bottom">
        <div class="container">
                                <a class="navbar-brand mb-0 h1" href="http://hapifhir.io"><span class="color-highlight">HAPI</span> FHIR</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#top-navbar-collapse-1" aria-controls="top-navbar-collapse-1" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="top-navbar-collapse-1">
                <ul class="nav navbar-nav ml-auto">
<li class="nav-item " ><a     
     href="https://smilecdr.com"  title="Support"   class="externalLink nav-link" >Support</a></li>
<li class="nav-item " ><a     
     href="download.html"  title="Download"  class="nav-link" >Download</a></li>
<li class="nav-item " ><a     
     href="https://github.com/jamesagnew/hapi-fhir"  title="GitHub Project"   class="externalLink nav-link" >GitHub Project</a></li>
                                            <li class="nav-item dropdown active">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Documentation <b class="caret"></b></a>
                <div class="dropdown-menu">
                    <a href="docindex.html" title="Documentation Index"  class="dropdown-item ">Documentation Index</a>
                    <a href="doc_intro.html" title="Introduction"  class="dropdown-item ">Introduction</a>
                    <a href="doc_dstu2.html" title="DSTU3 Support / HL7.org Structures"  class="dropdown-item ">DSTU3 Support / HL7.org Structures</a>
                    <div class="dropdown-submenu ">
    <a     
     href="doc_fhirobjects.html"  title="The Data Model"  class="dropdown-item" >The Data Model</a>                        <div class="dropdown-menu">
                                <a href="doc_fhirobjects.html" title="Working with Resources"  class="dropdown-item ">Working with Resources</a>
                                <a href="doc_resource_references.html" title="Resource References"  class="dropdown-item ">Resource References</a>
                                <a href="doc_extensions.html" title="Profiles & Extensions"  class="dropdown-item ">Profiles & Extensions</a>
                                <a href="doc_tags.html" title="Tags"  class="dropdown-item ">Tags</a>
                                <a href="doc_validation.html" title="Validation"  class="dropdown-item ">Validation</a>
                                <a href="doc_custom_structures.html" title="Custom Structures"  class="dropdown-item ">Custom Structures</a>
                                <a href="doc_converter.html" title="Version Converter"  class="dropdown-item ">Version Converter</a>
                            </div>
                    </div>
                    <div class="dropdown-submenu ">
    <a     
     href="doc_rest_client.html"  title="RESTful Client"  class="dropdown-item" >RESTful Client</a>                        <div class="dropdown-menu">
                                <a href="doc_rest_client.html" title="Fluent/Generic Client"  class="dropdown-item ">Fluent/Generic Client</a>
                                <a href="doc_rest_client_annotation.html" title="Annotation Client"  class="dropdown-item ">Annotation Client</a>
                                <a href="doc_rest_client_interceptor.html" title="Interceptors (client)"  class="dropdown-item ">Interceptors (client)</a>
                                <a href="doc_rest_client_http_config.html" title="Client Configuration"  class="dropdown-item ">Client Configuration</a>
                                <a href="doc_rest_client_examples.html" title="Client Examples"  class="dropdown-item ">Client Examples</a>
                                <a href="doc_rest_client_alternate_provider.html" title="JAX-RS Client & Alternate HTTP Providers"  class="dropdown-item ">JAX-RS Client & Alternate HTTP Providers</a>
                            </div>
                    </div>
                                    <div class="dropdown-submenu active">
    <a     
     href=""  title="RESTful Server"  class="dropdown-item" >RESTful Server</a>                        <div class="dropdown-menu">
                                                <a href="" title="Using RESTful Server"  class="dropdown-item active">Using RESTful Server</a>
                                <a href="doc_rest_operations.html" title="RESTful Operations"  class="dropdown-item ">RESTful Operations</a>
                                <a href="doc_narrative.html" title="Narrative Generator"  class="dropdown-item ">Narrative Generator</a>
                                <a href="doc_rest_server_interceptor.html" title="Interceptors (server)"  class="dropdown-item ">Interceptors (server)</a>
                                <a href="doc_rest_server_security.html" title="Security"  class="dropdown-item ">Security</a>
                                <a href="doc_cors.html" title="CORS Support"  class="dropdown-item ">CORS Support</a>
                                <a href="doc_server_tester.html" title="Web Testing UI"  class="dropdown-item ">Web Testing UI</a>
                                <a href="doc_rest_server_jaxrs.html" title="JAX-RS Support"  class="dropdown-item ">JAX-RS Support</a>
                            </div>
                    </div>
                    <a href="doc_logging.html" title="Logging"  class="dropdown-item ">Logging</a>
                    <a href="doc_rest_etag.html" title="ETags"  class="dropdown-item ">ETags</a>
                    <a href="doc_jpa.html" title="JPA/Database Server"  class="dropdown-item ">JPA/Database Server</a>
                    <a href="doc_android.html" title="Android Support"  class="dropdown-item ">Android Support</a>
                    <div class="dropdown-submenu ">
    <a     
     href="apidocs/index.html"  title="JavaDocs"  class="dropdown-item" >JavaDocs</a>                        <div class="dropdown-menu">
                                <a href="apidocs/index.html" title="Core API"  class="dropdown-item ">Core API</a>
                                <a href="apidocs-dstu2/index.html" title="Model API (DSTU2)"  class="dropdown-item ">Model API (DSTU2)</a>
                                <a href="apidocs-dstu3/index.html" title="Model API (DSTU3)"  class="dropdown-item ">Model API (DSTU3)</a>
                                <a href="apidocs-r4/index.html" title="Model API (R4)"  class="dropdown-item ">Model API (R4)</a>
                                <a href="apidocs-client/index.html" title="Client API"  class="dropdown-item ">Client API</a>
                                <a href="apidocs-server/index.html" title="Server API (Plain)"  class="dropdown-item ">Server API (Plain)</a>
                                <a href="apidocs-jpaserver/index.html" title="Server API (JPA)"  class="dropdown-item ">Server API (JPA)</a>
                            </div>
                    </div>
                    <a href="doc_cli.html" title="Command Line Tool (hapi-fhir-cli)"  class="dropdown-item ">Command Line Tool (hapi-fhir-cli)</a>
                    <a href="doc_tinder.html" title="Maven Plugin (hapi-tinder-plugin)"  class="dropdown-item ">Maven Plugin (hapi-tinder-plugin)</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Get Help <b class="caret"></b></a>
                <div class="dropdown-menu">
                    <a href="https://github.com/jamesagnew/hapi-fhir/wiki/Getting-Help" title="How to Ask for Help (read this first!)"  class="dropdown-item ">How to Ask for Help (read this first!)</a>
                    <a href="https://groups.google.com/d/forum/hapi-fhir" title="Google Group (Ask Questions)"  class="dropdown-item ">Google Group (Ask Questions)</a>
                    <a href="https://github.com/jamesagnew/hapi-fhir/issues" title="Issue Tracker (Report Bugs/Request Features)"  class="dropdown-item ">Issue Tracker (Report Bugs/Request Features)</a>
                    <a href="https://chat.fhir.org" title="FHIR.org Chat (Live Chat with FHIR Implementors)"  class="dropdown-item ">FHIR.org Chat (Live Chat with FHIR Implementors)</a>
                    <a href="hapi-fhir-faq.html" title="Frequently Asked Questions (FAQ)"  class="dropdown-item ">Frequently Asked Questions (FAQ)</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Test Server <b class="caret"></b></a>
                <div class="dropdown-menu">
                    <a href="http://hapi.fhir.org" title="Public Test Server"  class="dropdown-item ">Public Test Server</a>
                </div>
            </li>
                </ul><!--/ul.navbar-nav -->
            </div><!--/.nav-collapse -->
        </div> <!--/.container -->
    </nav> <!--/.navbar -->
    <div class="main-body container-fuild my-3">
    <div class="row m-0">
        <div class="d-xs-none d-sm-none d-md-none d-lg-block col-lg-2">
        </div>
        <main class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-8" role="main">
            <div class="header container-fluid">
                                     <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a     
     href="index.html"  title="HAPI FHIR"  class="" >HAPI FHIR</a></li>
            <li class="breadcrumb-item active">RESTful Server</li>

        </ol>
    </nav>
            </div> <!-- end : header -->
                             <div class="section"> 
 <div class="page-header">
  <h2 id="_toc_creating_a_restful_server">Creating a RESTful Server</h2>
 </div> 
 <p> HAPI provides a built-in mechanism for adding FHIR's RESTful Server capabilities to your applications. The HAPI RESTful Server is Servlet based, so it should be easy to deploy to any of the many compliant containers that exist. </p> 
 <p> Setup is mostly done using simple annotations, which means that it should be possible to create a FHIR compliant server quickly and easily. </p> 
 <a name="resource_providers"></a> 
 <div class="section"> 
  <h3 id="_toc_defining_resource_providers">Defining Resource Providers</h3> 
  <p> The first step in creating a FHIR RESTful Server is to define one or more resource providers. A resource provider is a class which is able to supply exactly one type of resource to be served up. </p> 
  <p> For example, if you wish to allow your server to serve up Patient, Observation and Location resources, you will need three resource providers. </p> 
  <p> A Resource provider class must implement the <a href="./apidocs/ca/uhn/fhir/rest/server/IResourceProvider.html">IResourceProvider</a> interface, and will contain one or more methods which have been annotated with special annotations indicating which RESTful operation that method supports. Below is a simple example of a resource provider which supports the <a class="externalLink" href="http://hl7.org/fhir/http.html#read">read</a> operation (i.e. retrieve a single resource by ID) as well as the <a class="externalLink" href="http://hl7.org/fhir/http.html#search">search</a> operation (i.e. find any resources matching a given criteria) for a specific search criteria. </p> 
  <div class="source"> 
   <pre>/**
 * All resource providers must implement IResourceProvider
 */
public class RestfulPatientResourceProvider implements IResourceProvider {

	/**
	 * The getResourceType method comes from IResourceProvider, and must
	 * be overridden to indicate what type of resource this provider
	 * supplies.
	 */
	@Override
	public Class&lt;Patient&gt; getResourceType() {
		return Patient.class;
	}
	
	/**
	 * The "@Read" annotation indicates that this method supports the
	 * read operation. Read operations should return a single resource
	 * instance. 
	 * 
	 * @param theId
	 *    The read operation takes one parameter, which must be of type
	 *    IdDt and must be annotated with the "@Read.IdParam" annotation.
	 * @return 
	 *    Returns a resource matching this identifier, or null if none exists.
	 */
	@Read()
	public Patient getResourceById(@IdParam IdDt theId) {
		Patient patient = new Patient();
		patient.addIdentifier();
		patient.getIdentifier().get(0).setSystem(new UriDt("urn:hapitest:mrns"));
		patient.getIdentifier().get(0).setValue("00002");
		patient.addName().addFamily("Test");
		patient.getName().get(0).addGiven("PatientOne");
		patient.setGender(AdministrativeGenderEnum.FEMALE);
		return patient;
	}

	/**
	 * The "@Search" annotation indicates that this method supports the 
	 * search operation. You may have many different methods annotated with
	 * this annotation, to support many different search criteria. This
	 * example searches by family name.
	 * 
	 * @param theFamilyName
	 *    This operation takes one parameter which is the search criteria. It is
	 *    annotated with the "@Required" annotation. This annotation takes one argument,
	 *    a string containing the name of the search criteria. The datatype here
	 *    is StringParam, but there are other possible parameter types depending on the
	 *    specific search criteria.
	 * @return
	 *    This method returns a list of Patients. This list may contain multiple
	 *    matching resources, or it may also be empty.
	 */
	@Search()
	public List&lt;Patient&gt; getPatient(@RequiredParam(name = Patient.SP_FAMILY) StringParam theFamilyName) {
		Patient patient = new Patient();
		patient.addIdentifier();
		patient.getIdentifier().get(0).setUse(IdentifierUseEnum.OFFICIAL);
		patient.getIdentifier().get(0).setSystem(new UriDt("urn:hapitest:mrns"));
		patient.getIdentifier().get(0).setValue("00001");
		patient.addName();
		patient.getName().get(0).addFamily(theFamilyName.getValue());
		patient.getName().get(0).addGiven("PatientOne");
		patient.setGender(AdministrativeGenderEnum.MALE);
		return Collections.singletonList(patient);
	}

}
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="_toc_adding_more_methods_search_history_create_etc">Adding more Methods (Search, History, Create, etc.)</h3> 
  <p> You will probably wish to add more methods to your resource provider. See <a href="./doc_rest_operations.html">RESTful Operations</a> for lots more examples of how to add methods for various operations. </p> 
  <p> For now, we will move on to the next step though, which is creating the actual server to hold your resource providers and deploying that. Once you have this working, you might want to come back and start adding other operations. </p> 
 </div> 
 <div class="section"> 
  <h3 id="_toc_create_a_server">Create a Server</h3> 
  <p> Once your resource providers are created, your next step is to define a server class. </p> 
  <p> HAPI provides a class called <a href="./apidocs/ca/uhn/fhir/rest/server/RestfulServer.html">RestfulServer</a>, which is a specialized Java Servlet. To create a server, you simply create a class which extends RestfulServer as shown in the example below. </p> 
  <div class="source"> 
   <pre>/**
 * In this example, we are using Servlet 3.0 annotations to define
 * the URL pattern for this servlet, but we could also
 * define this in a web.xml file.
 */
@WebServlet(urlPatterns= {"/fhir/*"}, displayName="FHIR Server")
public class ExampleRestfulServlet extends RestfulServer {

	private static final long serialVersionUID = 1L;

	/**
	 * The initialize method is automatically called when the servlet is starting up, so it can
	 * be used to configure the servlet to define resource providers, or set up
	 * configuration, interceptors, etc.
	 */
   @Override
   protected void initialize() throws ServletException {
      /*
       * The servlet defines any number of resource providers, and
       * configures itself to use them by calling
       * setResourceProviders()
       */
      List&lt;IResourceProvider&gt; resourceProviders = new ArrayList&lt;IResourceProvider&gt;();
      resourceProviders.add(new RestfulPatientResourceProvider());
      resourceProviders.add(new RestfulObservationResourceProvider());
      setResourceProviders(resourceProviders);
   }
	
}
</pre> 
  </div> 
  <a name="plain_providers"></a> 
 </div> 
 <div class="section"> 
  <h3 id="_toc_plain_providers_non-resource_specific">Plain Providers (non-resource specific)</h3> 
  <p> Defining one provider per resource is a good strategy to keep code readable and maintainable, but it is also possible to put methods for multiple resource types in a provider class. Providers which do not implement the <a href="./apidocs/ca/uhn/fhir/rest/server/IResourceProvider.html">IResourceProvider</a> (and therefore are not bound to one specific resource type) are known as <b>Plain Providers</b>. </p> 
  <p> A plain provider may implement any <a href="./doc_rest_operations.html">RESTful operation</a>, but will generally need to explicitly state what type of resource it applies to. If the method directly returns a resource or a collection of resources (as in an <a href="./doc_rest_operations.html#instance_read">instance read</a> or <a href="./doc_rest_operations.html#type_search">type search</a> operation) the resource type will be inferred automatically. If the method returns a <a href="./apidocs/ca/uhn/fhir/model/api/Bundle.html">Bundle</a> resource, it is necessary to explicitly specify the resource type in the method annotation. The following example shows this: </p> 
  <div class="source"> 
   <pre>public class PlainProvider {

  /**
   * This method is a Patient search, but HAPI can not automatically
   * determine the resource type so it must be explicitly stated.
   */
  @Search(type=Patient.class)
  public Bundle searchForPatients(@RequiredParam(name=Patient.SP_NAME) StringDt theName) {
    Bundle retVal = new Bundle();
    // perform search
    return retVal;
  }	
	
}
</pre> 
  </div> 
  <p> In addition, some methods are not resource specific. For example, the <a href="./doc_rest_operations.html#history">system history</a> operation returns historical versions of <b>all resource types</b> on a server, so it needs to be defined in a plain provider. </p> 
  <p> Once you have defined your plain providers, they are passed to the server in a similar way to the resource providers. </p> 
  <div class="source"> 
   <pre>public class ExampleServlet extends ca.uhn.fhir.rest.server.RestfulServer {

    /**
     * Constructor
     */
  public ExampleServlet() {
    /*
     * Plain providers are passed to the server in the same way
     * as resource providers. You may pass both resource providers
     * and and plain providers to the same server if you like. 
     */
    List&lt;Object&gt; plainProviders=new ArrayList&lt;Object&gt;();
    plainProviders.add(new PlainProvider());
    registerProviders(plainProviders);
    
    List&lt;IResourceProvider&gt; resourceProviders = new ArrayList&lt;IResourceProvider&gt;();
    // ...add some resource providers...
	  registerProviders(resourceProviders);
  }
	
}
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="_toc_configure_the_servers_identityweb_address">Configure the Server's Identity/Web Address</h3> 
  <p> The server will return data in a number of places that includes the complete "identity" of a resource. Identity in this case refers to the web address that a user can use to access the resource. </p> 
  <p> For instance, if your server is hosted at <code class="\&quot;literal\&quot;">http://foo.com/fhir</code> and your resource provider returns a Patient resource with the ID "123", the server should translate that ID to "http://foo.com/fhir/Patient/123". </p> 
  <p> The server will attempt to determine what the base URL should be based on what the request it receives looks like, but if it is not getting the right address you may wish to use a different "address strategy". </p> 
  <p> The simplest way to do this is to configure the server to use a hardcoded base URL, which means that the server won't try to figure out the "http://foo.com/fhir" part of the URL but will instead just use a fixed value you supply. This is shown in the following example: </p> 
  <div class="source"> 
   <pre>    public class MyServlet extends ca.uhn.fhir.rest.server.RestfulServer {

        /**
         * Constructor
         */
        public MyServlet() {

            String serverBaseUrl = "http://foo.com/fhir";
            setServerAddressStrategy(new HardcodedServerAddressStrategy(serverBaseUrl));

            // ...add some resource providers, etc...
            List&lt;IResourceProvider&gt; resourceProviders = new ArrayList&lt;IResourceProvider&gt;();
            setResourceProviders(resourceProviders);
        }

    }
</pre> 
  </div> 
  <div class="section"> 
   <h4 id="_toc_other_strategies">Other Strategies</h4> 
   <p> See the <a href="./apidocs/ca/uhn/fhir/rest/server/IServerAddressStrategy.html">IServerAddressStrategy</a> JavaDoc (specifically the list of "All Known Implementing Classes") to see other strategies that are available. </p> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="_toc_deploy">Deploy</h3> 
  <p> Once you have created your resource providers and your restful server class, you can bundle these into a WAR file and you are ready to deploy to any JEE container (Tomcat, Websphere, Glassfish, etc). </p> 
  <p> Bundling a servlet into a WAR file and deploying it to an application server is beyond the scope of this page, but there are many good tutorials on how to do this. </p> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="_toc_conformancemetadata_statement">Conformance/Metadata Statement</h2> 
 <p> The HAPI FHIR RESTful Server will automatically export a <a class="externalLink" href="http://hl7.org/implement/standards/fhir/capabilitystatement.html">capability statement</a> (or a <a class="externalLink" href="https://www.hl7.org/fhir/DSTU2/conformance.html">conformance statement</a> for DSTU2 and prior), as required by the <a class="externalLink" href="http://hl7.org/implement/standards/fhir/http.html#conformance">FHIR Specification</a>. </p> 
 <p> This statement is automatically generated based on the various annotated methods which are provided to the server. This behaviour may be modified by creating a new class containing a method annotated with a <a href="doc_rest_operations.html#system_conformance">@Metadata Operation</a> and then passing an instance of that class to the <a href="./apidocs/ca/uhn/fhir/rest/server/RestfulServer.html#setServerConformanceProviderjava.lang.Object">setServerConformanceProvider</a> method on your server. </p> 
 <div class="section"> 
  <h3 id="_toc_enhancing_the_generated_conformance_statement">Enhancing the Generated Conformance Statement</h3> 
  <p> If you have a need to add your own content (special extensions, etc.) to your server's conformance statement, but still want to take advantage of HAPI's automatic conformance generation, you may wish to extend <a class="externalLink" href="http://jamesagnew.github.io/hapi-fhir/apidocs/ca/uhn/fhir/rest/server/provider/ServerConformanceProvider.html">ServerConformanceProvider</a>. </p> 
  <p> In your own class extending this class, you can override the <code class="\&quot;literal\&quot;">getServerConformance()</code> method to provide your own implementation. In this method, call <code class="\&quot;literal\&quot;">super.getServerConformance()</code> to obtain the built-in conformance statement and then add your own information to it. </p> 
  <p> Note that if you are adding items during each invocation you should be aware that by default the same instance is cached by ServerConformanceProvider. This can result in an ever-growing conformance statement. You must call <code class="\&quot;literal\&quot;">setCache(false);</code> in the constructor of your new conformance provider to avoid this behaviour. </p> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="_toc_paging_responses">Paging Responses</h2> 
 <p> The <b>Search</b> and <b>History</b> operations both return a bundle which contain zero or more resources. FHIR RESTful servers may optionaly support paging responses, meaning that (for example) if a search returns 500 resources, the server can return a bundle containing only the first 20 and a link which will return the next 20, etc. </p> 
 <p> By default, RESTful servers will not page, but will rather return all resources immediately in a single bundle. There are two complimentary parts to the paging support: paging prividers, and bundle providers. </p> 
 <div class="section"> 
  <h3 id="_toc_paging_providers">Paging Providers</h3> 
  <p> To support paging, a server must have an <code class="\&quot;literal\&quot;">IPagingProvider</code> implementation set. The paging provider is used to store resource return lists between incoming calls by clients. </p> 
  <p> A paging provider provides two key methods: </p> 
  <ul> 
   <li> <code class="\&quot;literal\&quot;">storeResultList</code>, which takes a bundle provider (see below) and stores it for later retrieval. This might be by simply keeping it in memory, but it might also store it on disk, in a database, etc. This method must return a textual ID which can be used to retrieve this list later. </li> 
   <li> <code class="\&quot;literal\&quot;">retrieveResultList</code>, which takes an ID obtained by a previous call to <code class="\&quot;literal\&quot;">storeResultList</code> and returns the corresponding result list. </li> 
  </ul> 
  <p> Note that the IPagingProvider is intended to be simple and implementable and you are encouraged to provide your own implementations. </p> 
  <p> The following example shows a server implementation with paging support. </p> 
  <div class="source"> 
   <pre>public class PagingServer extends RestfulServer {

	public PagingServer() {
		
		/*
		 * Set the resource providers as always. Here we are using the paging
		 * provider from the example below, but it is not strictly neccesary
		 * to use a paging resource provider as well. If a normal resource 
		 * provider is used (one which returns List&lt;?&gt; instead of IBundleProvider)
		 * then the loaded resources will be stored by the IPagingProvider.
		 */
		setResourceProviders(new PagingPatientProvider());
		
		/*
		 * Set a paging provider. Here a simple in-memory implementation
		 * is used, but you may create your own. 
		 */
		FifoMemoryPagingProvider pp = new FifoMemoryPagingProvider(10);
		pp.setDefaultPageSize(10);
		pp.setMaximumPageSize(100);
		setPagingProvider(pp);
				
	}

}
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="_toc_bundle_providers">Bundle Providers</h3> 
  <p> If a server supports a paging provider, a further optimization is to also use a bundle provider. A bundle provider simply takes the place of the <code class="\&quot;literal\&quot;">List&lt;IResource&gt;</code> return type in your provider methods. </p> 
  <p> When using a bundle provider however, the server will only request small sublists of resources as they are actually being returned. This allows servers to optimize by not loading all resources into memory until they are actually needed. </p> 
  <p> One implementation of a bundle provider is shown below. This provider example works by only keeping the resource IDs in memory, but there are other possible implementation strategies that would work as well. </p> 
  <p> Note that the IBundleProvider is intended to be simple and implementable and you are encouraged to provide your own implementations. </p> 
  <div class="source"> 
   <pre>public class PagingPatientProvider implements IResourceProvider {

   /**
    * Search for Patient resources matching a given family name
    */
   @Search
   public IBundleProvider search(@RequiredParam(name = Patient.SP_FAMILY) StringParam theFamily) {
      final InstantDt searchTime = InstantDt.withCurrentTime();

      /**
       * First, we'll search the database for a set of database row IDs that
       * match the given search criteria. That way we can keep just the row IDs
       * around, and load the actual resources on demand later as the client
       * pages through them.
       */
      final List&lt;Long&gt; matchingResourceIds = null; // &lt;-- implement this

      /**
       * Return a bundle provider which can page through the IDs and return the
       * resources that go with them.
       */
      return new IBundleProvider() {

         @Override
         public Integer size() {
            return matchingResourceIds.size();
         }

         @Nonnull
			@Override
         public List&lt;IBaseResource&gt; getResources(int theFromIndex, int theToIndex) {
            int end = Math.max(theToIndex, matchingResourceIds.size() - 1);
            List&lt;Long&gt; idsToReturn = matchingResourceIds.subList(theFromIndex, end);
            return loadResourcesByIds(idsToReturn);
         }

         @Override
         public InstantDt getPublished() {
            return searchTime;
         }

         @Override
         public Integer preferredPageSize() {
            // Typically this method just returns null
            return null;
         }

			@Override
			public String getUuid() {
				return null;
			}
      };
   }

   /**
    * Load a list of patient resources given their IDs
    */
   private List&lt;IBaseResource&gt; loadResourcesByIds(List&lt;Long&gt; theIdsToReturn) {
      // .. implement this search against the database ..
      return null;
   }

   @Override
   public Class&lt;? extends IResource&gt; getResourceType() {
      return Patient.class;
   }

}
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="_toc_using_named_pages">Using Named Pages</h3> 
  <p> By default, the paging system uses parameters that are embedded into the page links for the start index and the page size. This is useful for servers that can retrieve arbitrary offsets within a search result. For example, if a given search can easily retrieve "items 5-10 from the given search", then the mechanism above works well. </p> 
  <p> Another option is to use "named pages", meaning that each page is simply assigned an ID by the server, and the next/previous page is requested using this ID. </p> 
  <p> In order to support named pages, the IPagingProvider must implement the <code class="\&quot;literal\&quot;">retrieveResultList(String theSearchId, String thePageId)</code> method. </p> 
  <p> Then, individual search/history methods may return a <code class="\&quot;literal\&quot;">BundleProviderWithNamedPages</code> instead of a simple <code class="\&quot;literal\&quot;">IBundleProvider</code>. </p> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="_toc_common_method_parameters">Common Method Parameters</h2> 
 <p> Different RESTful methods will have different requirements in terms of the method parameters they require, as described in the <a href="./doc_rest_operations.html">RESTful Operations</a> page. </p> 
 <p> In addition, there are several parameters you may add in order to meet specific needs of your application. </p> 
 <div class="section"> 
  <h3 id="_toc_accessing_the_underlying_servlet_requestresponse">Accessing the underlying Servlet Request/Response</h3> 
  <p> In some cases, it may be useful to have access to the underlying HttpServletRequest and/or HttpServletResponse objects. These may be added by simply adding one or both of these objects as method parameters. </p> 
  <div class="source"> 
   <pre>@Search
public List&lt;Patient&gt; findPatients(
		@RequiredParam(name="foo") StringParam theParameter,
		HttpServletRequest theRequest, 
		HttpServletResponse theResponse) {
 List&lt;Patient&gt; retVal=new ArrayList&lt;Patient&gt;(); // populate this
 return retVal;
}
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="_toc_subsetting__summary_and__elements_parameters">Subsetting: _summary and _elements parameters</h3> 
  <p> FHIR allows for the a number of special behaviours where only certain portions of resources are returned, instead of the entire resource body. These behaviours are automatically supported in HAPI (as of HAPI 1.2) and no additional effort needs to be taken. </p> 
  <p> The following behaviours are automatically supported by the HAPI server: </p> 
  <table border="0" class="bodyTable table table-striped table-hover"> 
   <thead> 
    <tr class="a"> 
     <td><b>Parameter</b></td> 
     <td><b>Description</b></td> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="b"> 
     <td>_summary=true</td> 
     <td> Resources will be returned with any elements not marked as summary elements omitted. </td> 
    </tr> 
    <tr class="a"> 
     <td>_summary=text</td> 
     <td> Only the narrative portion of returned resources will be returned. For a read/vread operation, the narrative will be served with a content type of <code class="\&quot;literal\&quot;">text/html</code>. for other operations, a Bundle will be returned but resources will only include the text element. </td> 
    </tr> 
    <tr class="b"> 
     <td>_summary=data</td> 
     <td> The narrative (text) portion of the resource will be omitted. </td> 
    </tr> 
    <tr class="a"> 
     <td>_summary=count</td> 
     <td> For a search, only Bundle.count will be returned. </td> 
    </tr> 
    <tr class="b"> 
     <td>_elements=[element names]</td> 
     <td> Only the given top level elements of returned resources will be returned, e.g for a Patient search: <code class="\&quot;literal\&quot;">_elements=name,contact</code> </td> 
    </tr> 
   </tbody> 
  </table> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="_toc_exceptionerror_handling">Exception/Error Handling</h2> 
 <p> Within your RESTful operations, you will generally be returning resources or bundles of resources under normal operation. During execution you may also need to propagate errors back to the client for a variety of reasons. </p> 
 <div class="section"> 
  <h3 id="_toc_automatic_exception_handling">Automatic Exception Handling</h3> 
  <p> By default, HAPI generates appropriate error responses for a several built-in conditions. For example, if the user makes a request for a resource type that does not exist, or tries to perform a search using an invalid parameter, HAPI will automatically generate an <code class="\&quot;literal\&quot;">HTTP 400 Invalid Request</code>, and provide an OperationOutcome resource as response containing details about the error. </p> 
  <p> Similarly, if your method implementation throws any exceptions (checked or unchecked) instead of returning normally, the server will usually* automatically generate an <code class="\&quot;literal\&quot;">HTTP 500 Internal Error</code> and generate an OperationOutcome with details about the exception. </p> 
  <p> <i>* Note that certain exception types will generate other response codes, as explained below.</i> </p> 
 </div> 
 <div class="section"> 
  <h3 id="_toc_generating_specific_http_error_responses">Generating Specific HTTP Error Responses</h3> 
  <p> In many cases, you will want to respond to client requests with a specific HTTP error code (and possibly your own error message too). Sometimes this is a requirement of the FHIR specification (e.g. the "validate" operation requires a response of <code class="\&quot;literal\&quot;">HTTP 422 Unprocessable Entity</code> if the validation fails). Sometimes this is simply a requirement of your specific application (e.g. you want to provide application specific HTTP status codes for certain types of errors) </p> 
  <p> To customize the error that is returned by HAPI's server methods, you must throw an exception which extends HAPI's <a class="externalLink" href="http://jamesagnew.github.io/hapi-fhir/apidocs/ca/uhn/fhir/rest/server/exceptions/BaseServerResponseException.html">BaseServerResponseException</a> class. Various exceptions which extend this class will generate a different HTTP status code. </p> 
  <p> For example, the <a class="externalLink" href="http://jamesagnew.github.io/hapi-fhir/apidocs/ca/uhn/fhir/rest/server/exceptions/ResourceNotFoundException.html">ResourceNotFoundException</a> causes HAPI to return an <code class="\&quot;literal\&quot;">HTTP 404 Resource Not Found</code>. A complete list of available exceptions is available <a class="externalLink" href="http://jamesagnew.github.io/hapi-fhir/apidocs/ca/uhn/fhir/rest/server/exceptions/package-summary.html">here</a>. </p> 
  <p> If you wish to return an HTTP status code for which there is no pre-defined exception, you may throw the <a class="externalLink" href="http://jamesagnew.github.io/hapi-fhir/apidocs/ca/uhn/fhir/rest/server/exceptions/UnclassifiedServerFailureException.html">UnclassifiedServerFailureException</a>, which allows you to return any status code you wish. </p> 
 </div> 
 <div class="section"> 
  <h3 id="_toc_returning_an_operationoutcome_for_errors">Returning an OperationOutcome for Errors</h3> 
  <p> By default, HAPI will automatically generate an OperationOutcome which contains details about the exception that was thrown. You may wish to provide your own OperationOutcome instead. In this case, you may pass one into the constructor of the exception you are throwing. </p> 
  <div class="source"> 
   <pre>@Read
public Patient read(@IdParam IdDt theId) {
   if (databaseIsDown) {
      OperationOutcome oo = new OperationOutcome();
      oo.addIssue().setSeverity(IssueSeverityEnum.FATAL).setDetails("Database is down");
      throw new InternalErrorException("Database is down", oo);
   }
   
   Patient patient = new Patient(); // populate this
   return patient;
}
</pre> 
  </div> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="_toc_using_the_server">Using the Server</h2> 
 <p> Your RESTful server should now support the methods you have declared. Here are a few helpful tricks for interacting with the server: </p> 
 <p> <b>Pretty Printing:</b> The HAPI RESTful server supports a called <code class="\&quot;literal\&quot;">_pretty</code>, which can be used to request that responses be pretty-printed (indented for easy reading by humans) by setting the value to <code class="\&quot;literal\&quot;">true</code>. This can be useful in testing. An example URL for this might be:<br> <code class="\&quot;literal\&quot;">http://example.com/fhir/Patient/_search?name=TESTING&amp;_pretty=true</code> </p> 
</div> 
<div class="section"> 
 <h2 id="_toc_populating_resource_metadata">Populating Resource Metadata</h2> 
 <p> Server operations will often return a resource or a bundle of resources. These types will contain one or more resource instances, but also specify a set of metadata describing that resource. </p> 
 <p> For example, resources have a "published" and "updated" date, referring to the date/time the resource was originally created and the date/time the resource was last updated respectively. For operations which return a single resource, these values are returned via HTTP headers. For operations which return a bundle, these values are returned via elements within the bundle's "entry" tag. </p> 
 <p> Bundles may also contain a set of links, such as an "alternate" link to a resource, or a "search" link. </p> 
 <p> Populating these metadata elements is done via the <code class="\&quot;literal\&quot;"><a class="externalLink" href="http://jamesagnew.github.io/hapi-fhir/apidocs/ca/uhn/fhir/model/api/IResource.html#getResourceMetadata()">IResource#getResourceMetadata()</a></code> method. The following example shows how to set various metadata elements on a resource being returned. </p> 
 <div class="source"> 
  <pre>@Search
public List&lt;Patient&gt; getAllPatients() {
   ArrayList&lt;Patient&gt; retVal = new ArrayList&lt;Patient&gt;();
   
   // Create a patient to return
   Patient patient = new Patient();
   retVal.add(patient);
   patient.setId("Patient/123");
   patient.addName().addFamily("Smith").addGiven("John");
   
   // Create a tag list and add it to the resource
   TagList tags = new TagList();
   tags.addTag(Tag.HL7_ORG_FHIR_TAG, "http://foo/tag1.html", "Some tag");
   tags.addTag(Tag.HL7_ORG_FHIR_TAG, "http://foo/tag2.html", "Another tag");
   ResourceMetadataKeyEnum.TAG_LIST.put(patient, tags);
   
   // Set some links (these can be provided as relative links or absolute)
   // and the server will convert to absolute as appropriate
   String linkAlternate = "Patient/7736";
   ResourceMetadataKeyEnum.LINK_ALTERNATE.put(patient, linkAlternate);
   String linkSearch = "Patient?name=smith&amp;name=john";
   ResourceMetadataKeyEnum.LINK_SEARCH.put(patient, linkSearch);
   
   // Set the published and updated dates
   InstantDt pubDate = new InstantDt("2011-02-22");
   ResourceMetadataKeyEnum.PUBLISHED.put(patient, pubDate);
   InstantDt updatedDate = new InstantDt("2014-07-12T11:22:27Z");
   ResourceMetadataKeyEnum.UPDATED.put(patient, updatedDate);
   
   // Set the resource title (note that if you are using HAPI's narrative
   // generation capability, the narrative generator will often create
   // useful titles automatically, and the server will create a default
   // title if none is provided)
   String title = "Patient John SMITH";
   ResourceMetadataKeyEnum.TITLE.put(patient, title);
   
   return retVal;
}
</pre> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="_toc_server_lifecycle_methods">Server Lifecycle Methods</h2> 
 <p> Resource providers may optionally want to be notified when the server they are registered with is being destroyed, so that they can perform cleanup. In this case, a method annotated with the <code class="\&quot;literal\&quot;">@Destroy</code> annotation can be added (this method should be public, return <code class="\&quot;literal\&quot;">void</code>, and take no parameters). </p> 
 <p> This method will be invoked once by the RestfulServer when it is shutting down. </p> 
</div> 
<div class="section"> 
 <h2 id="_toc_a_complete_example">A Complete Example</h2> 
 <p> A complete example showing how to implement a RESTful server can be found in our Git repo here: <a class="externalLink" href="https://github.com/jamesagnew/hapi-fhir/tree/master/restful-server-example">https://github.com/jamesagnew/hapi-fhir/tree/master/restful-server-example</a> </p> 
 <p> Hopefully this will be available as a separate download soon, but currently it may be used to demonstrate a fully working server project. </p> 
</div> 
<a name="Multitenancy"></a> 
<div class="section" id="Multitenancy"> 
 <h2 id="_toc_"></h2> 
 <p> If you wish to allow a single endpoint to support multiple tenants, you may supply the server with a multitenancy provider. </p> 
 <p> This means that additional logic will be performed during request parsing to determine a tenant ID, which will be supplied to resource providers. This can be useful in servers that have multiple distinct logical pools of resources hosted on the same infrastructure. </p> 
 <div class="section"> 
  <h3 id="_toc_url_base_multitenancy">URL Base Multitenancy</h3> 
  <p> Using URL Base Multitenancy means that an additional element is added to the path of each resource between the server base URL and the resource name. For example, if your restful server is deployed to <code class="\&quot;literal\&quot;">http://acme.org:8080/baseDstu3</code> and user wished to access Patient 123 for Tenant "FOO", the resource ID (and URL to fetch that resource) would be <code class="\&quot;literal\&quot;">http://acme.org:8080/FOO/Patient/123</code>. </p> 
  <p> To enable this mode on your server, simply provide the <code class="\&quot;literal\&quot;">UrlBaseTenantIdentificationStrategy</code> to the server as shown below: </p> 
  <div class="source"> 
   <pre>	public class MyServer extends RestfulServer {

	@Override
	protected void initialize() {

		setTenantIdentificationStrategy(new UrlBaseTenantIdentificationStrategy());

		// ... do other initialization ...
	}
}
</pre> 
  </div> 
  <p> Your resource providers can then use a RequestDetails parameter to determine the tenant ID: </p> 
  <div class="source"> 
   <pre>	public class MyPatientResourceProvider implements IResourceProvider {

	@Override
	public Class&lt;? extends IBaseResource&gt; getResourceType() {
		return Patient.class;
	}

	@Read
	public Patient read(RequestDetails theRequestDetails, @IdParam IdType theId) {

		String tenantId = theRequestDetails.getTenantId();
		String resourceId = theId.getIdPart();

		// Use these two values to fetch the patient

		return new Patient();
	}
}

</pre> 
  </div> 
 </div> 
</div> 
<a name="extended_elements_support"></a> 
<div class="section" id="extended_elements_support"> 
 <h2 id="_toc_extended_elements_support1">Extended Elements Support</h2> 
 <p> The HAPI FHIR server may be configured using the <code class="\&quot;literal\&quot;">RestfulServer#setElementsSupport</code> to enable extended support for the <code class="\&quot;literal\&quot;">_elements</code> filter. </p> 
 <p> In standard mode, elements are supported exactly as described in the <a class="externalLink" href="http://hl7.org/fhir/search.html#elements">Elements Documentation</a> in the FHIR specification. </p> 
 <p> In extended mode, HAPI FHIR provides the same behaviour as described in the FHIR specification, but also enabled the following additional options: </p> 
 <ul> 
  <li> Values may be prepended using Resource names in order to apply the elements filter to multiple resources. For example, the following parameter could be used to apply elements filtering to both the DiagnosticReport and Observation resource in a search result:<br> <code class="\&quot;literal\&quot;">_elements=DiagnosticReport.subject,DiagnosticReport.result,Observation.value</code> </li> 
  <li> Values may be prepended with a wildcard star in order to apply them to all resource types. For example, the following parameter could be used to include the <code class="\&quot;literal\&quot;">subject</code> field in all resource types:<br> <code class="\&quot;literal\&quot;">_elements=*.subject</code> </li> 
  <li> Values may include complex paths. For example, the following parameter could be used to include only the code on a coded element:<br> <code class="\&quot;literal\&quot;">_elements=Procedure.reasonCode.coding.code</code> </li> 
  <li> Elements may be excluded using the <code class="\&quot;literal\&quot;">:exclude</code> modifier on the elements parameter. For example, the following parameter could be used to remove the resource metadata (meta) element from all resources in the response:<br> <code class="\&quot;literal\&quot;">_elements:exclude=*.meta</code><br> Note that this can be used to suppress the <code class="\&quot;literal\&quot;">SUBSETTED</code> tag which is automatically added to resources when an <code class="\&quot;literal\&quot;">_elements</code> parameter is applied. </li> 
 </ul> 
</div>                    </main>
        <div class="d-none d-sm-none d-md-none d-lg-none d-xl-block col-xl-2">
                        <div id="m-toc-sidebar" class="d-print-none m-toc-sidebar-enabled m-toc-sidebar-expanded m-toc-sidebar-autoexpandable toc-sidebar-fixed">
                <nav id="m-toc-sidebar-nav flex-column">
                <ul class="m-nav--sidebar nav flex-column flex-nowrap">
    <li class="h2">
        <a class="nav-link" href="#_toc_creating_a_restful_server" title="Creating a RESTful Server">Creating a RESTful Server</a>
    </li>
    <ul class="nav flex-column flex-nowrap nav-collapsible">
        <li class="h3">
        <a class="nav-link" href="#_toc_defining_resource_providers" title="Defining Resource Providers">Defining Resource Providers</a>
    </li>
    <li class="h3">
        <a class="nav-link" href="#_toc_adding_more_methods_search_history_create_etc" title="Adding more Methods (Search, History, Create, etc.)">Adding more Methods (Search, History, Create, etc.)</a>
    </li>
    <li class="h3">
        <a class="nav-link" href="#_toc_create_a_server" title="Create a Server">Create a Server</a>
    </li>
    <li class="h3">
        <a class="nav-link" href="#_toc_plain_providers_non-resource_specific" title="Plain Providers (non-resource specific)">Plain Providers (non-resource specific)</a>
    </li>
    <li class="h3">
        <a class="nav-link" href="#_toc_configure_the_servers_identityweb_address" title="Configure the Server's Identity/Web Address">Configure the Server's Identity/Web Address</a>
    </li>
    <ul class="nav flex-column flex-nowrap nav-collapsible">
        <li class="h4">
        <a class="nav-link" href="#_toc_other_strategies" title="Other Strategies">Other Strategies</a>
    </li>
    </ul>
    <li class="h3">
        <a class="nav-link" href="#_toc_deploy" title="Deploy">Deploy</a>
    </li>
    </ul>
        <li class="h2">
        <a class="nav-link" href="#_toc_conformancemetadata_statement" title="Conformance/Metadata Statement">Conformance/Metadata Statement</a>
    </li>
    <ul class="nav flex-column flex-nowrap nav-collapsible">
        <li class="h3">
        <a class="nav-link" href="#_toc_enhancing_the_generated_conformance_statement" title="Enhancing the Generated Conformance Statement">Enhancing the Generated Conformance Statement</a>
    </li>
    </ul>
        <li class="h2">
        <a class="nav-link" href="#_toc_paging_responses" title="Paging Responses">Paging Responses</a>
    </li>
    <ul class="nav flex-column flex-nowrap nav-collapsible">
        <li class="h3">
        <a class="nav-link" href="#_toc_paging_providers" title="Paging Providers">Paging Providers</a>
    </li>
    <li class="h3">
        <a class="nav-link" href="#_toc_bundle_providers" title="Bundle Providers">Bundle Providers</a>
    </li>
    <li class="h3">
        <a class="nav-link" href="#_toc_using_named_pages" title="Using Named Pages">Using Named Pages</a>
    </li>
    </ul>
        <li class="h2">
        <a class="nav-link" href="#_toc_common_method_parameters" title="Common Method Parameters">Common Method Parameters</a>
    </li>
    <ul class="nav flex-column flex-nowrap nav-collapsible">
        <li class="h3">
        <a class="nav-link" href="#_toc_accessing_the_underlying_servlet_requestresponse" title="Accessing the underlying Servlet Request/Response">Accessing the underlying Servlet Request/Response</a>
    </li>
    <li class="h3">
        <a class="nav-link" href="#_toc_subsetting__summary_and__elements_parameters" title="Subsetting: _summary and _elements parameters">Subsetting: _summary and _elements parameters</a>
    </li>
    </ul>
        <li class="h2">
        <a class="nav-link" href="#_toc_exceptionerror_handling" title="Exception/Error Handling">Exception/Error Handling</a>
    </li>
    <ul class="nav flex-column flex-nowrap nav-collapsible">
        <li class="h3">
        <a class="nav-link" href="#_toc_automatic_exception_handling" title="Automatic Exception Handling">Automatic Exception Handling</a>
    </li>
    <li class="h3">
        <a class="nav-link" href="#_toc_generating_specific_http_error_responses" title="Generating Specific HTTP Error Responses">Generating Specific HTTP Error Responses</a>
    </li>
    <li class="h3">
        <a class="nav-link" href="#_toc_returning_an_operationoutcome_for_errors" title="Returning an OperationOutcome for Errors">Returning an OperationOutcome for Errors</a>
    </li>
    </ul>
        <li class="h2">
        <a class="nav-link" href="#_toc_using_the_server" title="Using the Server">Using the Server</a>
    </li>
        <li class="h2">
        <a class="nav-link" href="#_toc_populating_resource_metadata" title="Populating Resource Metadata">Populating Resource Metadata</a>
    </li>
        <li class="h2">
        <a class="nav-link" href="#_toc_server_lifecycle_methods" title="Server Lifecycle Methods">Server Lifecycle Methods</a>
    </li>
        <li class="h2">
        <a class="nav-link" href="#_toc_a_complete_example" title="A Complete Example">A Complete Example</a>
    </li>
        <li class="h2">
        <a class="nav-link" href="#_toc_" title=""></a>
    </li>
    <ul class="nav flex-column flex-nowrap nav-collapsible">
        <li class="h3">
        <a class="nav-link" href="#_toc_url_base_multitenancy" title="URL Base Multitenancy">URL Base Multitenancy</a>
    </li>
    </ul>
        <li class="h2">
        <a class="nav-link" href="#_toc_extended_elements_support1" title="Extended Elements Support">Extended Elements Support</a>
    </li>
                    </ul>
                </nav>
           </div>
            </div>
    </div> <!-- row: end -->
</div> <!-- .main-body: end -->
    <div id="m-scroll-top" style="display: none;">
        <a href="javascript:;">
            <div class="arrow"></div>
            <div class="stick"></div>
        </a>
    </div>
  <!-- Footer -->
  <footer class="footer-light bg-light">
    <div class="container">
        <div class="row">
        
            <div class="col bottom-nav">

                <ul class="nav flex-column nav-list">
                    <li class="nav-header">HAPI FHIR                    </li>
                    <li class="nav-item " )><a     
     href="index.html"  title="Home"  class="nav-link" >Home</a></li>
                    <li class="nav-item " )><a     
     href="download.html"  title="Download"  class="nav-link" >Download</a></li>
                    <li class="nav-item " )><a     
     href="changes-report.html"  title="Changelog"  class="nav-link" >Changelog</a></li>
                    <li class="nav-item " )><a     
     href="license.html"  title="License"  class="nav-link" >License</a></li>
                    <li class="nav-header">Test Server                    </li>
                    <li class="nav-item " )><a     
     href="http://hapi.fhir.org"  title="Public Test Server"   class="externalLink nav-link" >Public Test Server</a></li>
                </ul>
            </div>
            <div class="col bottom-nav">

                <ul class="nav flex-column nav-list">
                    <li class="nav-header">Using HAPI                    </li>
                    <li class="nav-item " )><a     
     href="docindex.html"  title="Documentation Index"  class="nav-link" >Documentation Index</a></li>
                    <li class="nav-item " )><a     
     href="doc_cli.html"  title="Command Line Tool (cli)"  class="nav-link" >Command Line Tool (cli)</a></li>
                    <li class="nav-header">Contribute                    </li>
                    <li class="nav-item " )><a     
     href="hacking_hapi_fhir.html"  title="Guide to Hacking HAPI"  class="nav-link" >Guide to Hacking HAPI</a></li>
                </ul>
            </div>
            <div class="col bottom-nav">

                <ul class="nav flex-column nav-list">
                    <li class="nav-header">JavaDocs                    </li>
                    <li class="nav-item " )><a     
     href="apidocs/index.html"  title="Core API"  class="nav-link" >Core API</a></li>
                    <li class="nav-item " )><a     
     href="apidocs-dstu/index.html"  title="Model API (DSTU1)"  class="nav-link" >Model API (DSTU1)</a></li>
                    <li class="nav-item " )><a     
     href="apidocs-dstu2/index.html"  title="Model API (DSTU2)"  class="nav-link" >Model API (DSTU2)</a></li>
                    <li class="nav-item " )><a     
     href="apidocs-dstu3/index.html"  title="Model API (DSTU3)"  class="nav-link" >Model API (DSTU3)</a></li>
                    <li class="nav-item " )><a     
     href="apidocs-r4/index.html"  title="Model API (R4)"  class="nav-link" >Model API (R4)</a></li>
                    <li class="nav-item " )><a     
     href="apidocs-client/index.html"  title="Client API"  class="nav-link" >Client API</a></li>
                    <li class="nav-item " )><a     
     href="apidocs-server/index.html"  title="Server API (Plain)"  class="nav-link" >Server API (Plain)</a></li>
                    <li class="nav-item " )><a     
     href="apidocs-jpaserver/index.html"  title="Server API (JPA)"  class="nav-link" >Server API (JPA)</a></li>
                    <li class="nav-header">JXR                    </li>
                    <li class="nav-item " )><a     
     href="xref-base/index.html"  title="Core"  class="nav-link" >Core</a></li>
                    <li class="nav-item " )><a     
     href="xref-jpaserver/index.html"  title="JPA Server"  class="nav-link" >JPA Server</a></li>
                </ul>
            </div>
            <div class="col bottom-nav">

                <ul class="nav flex-column nav-list">
                    <li class="nav-header">Get Help                    </li>
                    <li class="nav-item " )><a     
     href="https://github.com/jamesagnew/hapi-fhir/wiki/Getting-Help"  title="How to Ask for Help (read this first!)"   class="externalLink nav-link" >How to Ask for Help (read this first!)</a></li>
                    <li class="nav-item " )><a     
     href="https://groups.google.com/d/forum/hapi-fhir"  title="Google Group (Ask Questions)"   class="externalLink nav-link" >Google Group (Ask Questions)</a></li>
                    <li class="nav-item " )><a     
     href="https://github.com/jamesagnew/hapi-fhir/issues"  title="Issue Tracker (Report Bugs/Request Features)"   class="externalLink nav-link" >Issue Tracker (Report Bugs/Request Features)</a></li>
                    <li class="nav-item " )><a     
     href="https://chat.fhir.org"  title="FHIR.org Chat (Live Chat with FHIR Implementors)"   class="externalLink nav-link" >FHIR.org Chat (Live Chat with FHIR Implementors)</a></li>
                    <li class="nav-item " )><a     
     href="hapi-fhir-faq.html"  title="Frequently Asked Questions (FAQ)"  class="nav-link" >Frequently Asked Questions (FAQ)</a></li>
                </ul>
            </div>
        <div class="col bottom-description">
            <blockquote class="blockquote">HAPI FHIR is a Java implementation of the HL7 FHIR
				(Fast Healthcare Interoperable Resources) specification.
				This project is open source (licensed under the Apache Software
				License 2.0) and 100% free to use.<br/><br/>
				<a href="https://github.com/jamesagnew/hapi-fhir"><img src="./images/github-logo-mini.png" alt="Hosted on GitHub" border="0"/></a>
				<br/>
				Star us and we will love you!<br />
				<iframe src="https://ghbtns.com/github-btn.html?user=jamesagnew&repo=hapi-fhir&type=star&count=true" frameborder="0" scrolling="0" width="100px" height="20px"></iframe></blockquote>
        </div>
      </div>
    </div>
  </footer>
  <div class="container subfooter">
    <div class="row">
      <div class="col-md-12">
        <p class="copyright">Copyright &copy;2014-2019                 <a href="http://www.uhn.ca">University Health Network</a>
. All Rights Reserved.</p>
        <p class="version-date">
<span class="projectVersion">Version: 4.1.0-SNAPSHOT. </span><span class="publishDate">
    Last Published: 2019-09-04
. </span>        </p>
        <p><a href="https://github.com/devacfr/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://devacfr.github.io" target="_blank" title="devacfr">devacfr</a>.</p>
      </div>
    </div>
  </div>

  <!-- Le javascript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/${popperVersion}/umd//popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

  <script src="./js/lightbox.min.js"></script>
      <script src="./js/reflow-skin.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.min.js"></script>
    <script type="text/javascript">
	var elements = document.getElementsByClassName("source");
	for (var i=0; i < elements.length; i++) {
		var pres = elements[i].getElementsByTagName("pre");
		for (var j = 0; j < pres.length; j++) {
			var pre = pres[j];
			if (pre.innerHTML.match(/^\s*\&lt\;/)) {
				pre.className = 'brush: xml';
			} else if (pre.innerHTML.match(/\/\*/)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\/\//)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\{/)) {
				pre.className = 'brush: jscript';
			} else if (pre.innerHTML.match(/^\#/)) {
				pre.className = 'brush: bash';
			} else if (pre.innerHTML.match(/\&lt\;\//)) {
				pre.className = 'brush: xml';
			} else {
				pre.className = 'brush: java';
			}
		}
	}

	SyntaxHighlighter.all();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1395874-5', 'auto');
  ga('require', 'displayfeatures');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script>
                </body >
</html>