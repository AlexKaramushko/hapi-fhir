<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.5-ea) on Tue Nov 12 16:25:20 EST 2019 -->
<title>ISearchCacheSvc (HAPI FHIR JPA Server 4.1.0 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2019-11-12">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ISearchCacheSvc (HAPI FHIR JPA Server 4.1.0 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ISearchCacheSvc.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">ca.uhn.fhir.jpa.search.cache</a></div>
<h2 title="Interface ISearchCacheSvc" class="title">Interface ISearchCacheSvc</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="BaseSearchCacheSvcImpl.html" title="class in ca.uhn.fhir.jpa.search.cache">BaseSearchCacheSvcImpl</a></code>, <code><a href="DatabaseSearchCacheSvcImpl.html" title="class in ca.uhn.fhir.jpa.search.cache">DatabaseSearchCacheSvcImpl</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">ISearchCacheSvc</span></pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util" class="externalLink">Optional</a>&lt;<a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fetchByUuid(java.lang.String)">fetchByUuid</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;theUuid)</code></th>
<td class="colLast">
<div class="block">Fetch a search using its UUID.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util" class="externalLink">Collection</a>&lt;<a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findCandidatesForReuse(java.lang.String,java.lang.String,int,java.util.Date)">findCandidatesForReuse</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;theResourceType,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;theQueryString,
                      int&nbsp;theQueryStringHash,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Date.html?is-external=true" title="class or interface in java.util" class="externalLink">Date</a>&nbsp;theCreatedAfter)</code></th>
<td class="colLast">
<div class="block">Look for any existing searches matching the given resource type and query string.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#flushLastUpdated()">flushLastUpdated</a></span>()</code></th>
<td class="colLast">
<div class="block">This is mostly public for unit tests</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#pollForStaleSearchesAndDeleteThem()">pollForStaleSearchesAndDeleteThem</a></span>()</code></th>
<td class="colLast">
<div class="block">This method will be called periodically to delete stale searches.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#save(ca.uhn.fhir.jpa.entity.Search)">save</a></span>&#8203;(<a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&nbsp;theSearch)</code></th>
<td class="colLast">
<div class="block">Places a new search of some sort in the cache, or updates an existing search.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util" class="externalLink">Optional</a>&lt;<a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tryToMarkSearchAsInProgress(ca.uhn.fhir.jpa.entity.Search)">tryToMarkSearchAsInProgress</a></span>&#8203;(<a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&nbsp;theSearch)</code></th>
<td class="colLast">
<div class="block">TODO: this is perhaps an inappropriate responsibility for this service</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateSearchLastReturned(ca.uhn.fhir.jpa.entity.Search,java.util.Date)">updateSearchLastReturned</a></span>&#8203;(<a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&nbsp;theSearch,
                        <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Date.html?is-external=true" title="class or interface in java.util" class="externalLink">Date</a>&nbsp;theDate)</code></th>
<td class="colLast">
<div class="block">Mark a search as having been "last used" at the given time.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="save(ca.uhn.fhir.jpa.entity.Search)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>save</h4>
<pre class="methodSignature"><a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&nbsp;save&#8203;(<a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&nbsp;theSearch)</pre>
<div class="block">Places a new search of some sort in the cache, or updates an existing search. The search passed in is guaranteed to have
 a <a href="../../entity/Search.html#getUuid()"><code>UUID</code></a> so that is a good candidate for consistent identification.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>theSearch</code> - The search to store</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Returns a copy of the search as it was saved. Callers should use the returned Search object for any further processing.</dd>
</dl>
</li>
</ul>
<a id="fetchByUuid(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchByUuid</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util" class="externalLink">Optional</a>&lt;<a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&gt;&nbsp;fetchByUuid&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;theUuid)</pre>
<div class="block">Fetch a search using its UUID. The search should be fully loaded when it is returned (i.e. includes are fetched, so that access to its
 fields will not cause database errors if the current tranaction scope ends.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>theUuid</code> - The search UUID</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The search if it exists</dd>
</dl>
</li>
</ul>
<a id="tryToMarkSearchAsInProgress(ca.uhn.fhir.jpa.entity.Search)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryToMarkSearchAsInProgress</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util" class="externalLink">Optional</a>&lt;<a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&gt;&nbsp;tryToMarkSearchAsInProgress&#8203;(<a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&nbsp;theSearch)</pre>
<div class="block">TODO: this is perhaps an inappropriate responsibility for this service

 <p>
 This method marks a search as in progress, but should only allow exactly one call to do so across the cluster. This
 is done so that if two client threads request the next page at the exact same time (which is unlikely but not
 impossible) only one will actually proceed to load the next results and the other will just wait for them
 to arrive.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>theSearch</code> - The search to mark</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>This method should return an empty optional if the search was not marked (meaning that another thread
 succeeded in marking it). If the search doesn't exist or some other error occurred, an exception will be thrown
 instead of <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true#empty()" title="class or interface in java.util" class="externalLink"><code>Optional.empty()</code></a></dd>
</dl>
</li>
</ul>
<a id="findCandidatesForReuse(java.lang.String,java.lang.String,int,java.util.Date)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findCandidatesForReuse</h4>
<pre class="methodSignature"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util" class="externalLink">Collection</a>&lt;<a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&gt;&nbsp;findCandidatesForReuse&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;theResourceType,
                                          <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;theQueryString,
                                          int&nbsp;theQueryStringHash,
                                          <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Date.html?is-external=true" title="class or interface in java.util" class="externalLink">Date</a>&nbsp;theCreatedAfter)</pre>
<div class="block">Look for any existing searches matching the given resource type and query string.
 <p>
 This method is allowed to perofrm a "best effort" return, so it can return searches that don't match the query string exactly, or
 which have a created timestamp before <code>theCreatedAfter</code> date. The caller is responsible for removing
 any inappropriate Searches and picking the most relevant one.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>theResourceType</code> - The resource type of the search. Results MUST match this type</dd>
<dd><code>theQueryString</code> - The query string. Results SHOULD match this type</dd>
<dd><code>theQueryStringHash</code> - The query string hash. Results SHOULD match this type</dd>
<dd><code>theCreatedAfter</code> - Results SHOULD not include any searches created before this cutoff timestamp</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A collection of candidate searches</dd>
</dl>
</li>
</ul>
<a id="updateSearchLastReturned(ca.uhn.fhir.jpa.entity.Search,java.util.Date)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateSearchLastReturned</h4>
<pre class="methodSignature">void&nbsp;updateSearchLastReturned&#8203;(<a href="../../entity/Search.html" title="class in ca.uhn.fhir.jpa.entity">Search</a>&nbsp;theSearch,
                              <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Date.html?is-external=true" title="class or interface in java.util" class="externalLink">Date</a>&nbsp;theDate)</pre>
<div class="block">Mark a search as having been "last used" at the given time. This method may (and probably should) be implemented
 to work asynchronously in order to avoid hammering the database if the search gets reused many times.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>theSearch</code> - The search</dd>
<dd><code>theDate</code> - The "last returned" timestamp</dd>
</dl>
</li>
</ul>
<a id="flushLastUpdated()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flushLastUpdated</h4>
<pre class="methodSignature">void&nbsp;flushLastUpdated()</pre>
<div class="block">This is mostly public for unit tests</div>
</li>
</ul>
<a id="pollForStaleSearchesAndDeleteThem()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>pollForStaleSearchesAndDeleteThem</h4>
<pre class="methodSignature">void&nbsp;pollForStaleSearchesAndDeleteThem()</pre>
<div class="block">This method will be called periodically to delete stale searches. Implementations are not required to do anything
 if they have some other mechanism for expiring stale results other than manually looking for them
 and deleting them.</div>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ISearchCacheSvc.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2014&#x2013;2019 <a href="http://www.uhn.ca">University Health Network</a>. All rights reserved.</small></p>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1395874-5', 'auto');
  ga('require', 'displayfeatures');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script>
                </body >
</html>